<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Secure Bank Management System">
    <meta name="author" content="Bank System">
    <title>{% block title %}Bank of Luck{% endblock %}</title>

    <!-- Apply theme BEFORE page renders to prevent flash -->
    <script>
        (function () {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            {% if session.admin_id %}
            <a class="navbar-brand" href="{{ url_for('admin_dashboard') }}">üè¶ Bank of Luck</a>
            {% elif session.emp_id %}
            <a class="navbar-brand" href="{{ url_for('employee_dashboard') }}">üè¶ Bank of Luck</a>
            {% elif session.user_id %}
            <a class="navbar-brand" href="{{ url_for('user_dashboard') }}">üè¶ Bank of Luck</a>
            {% else %}
            <a class="navbar-brand" href="#">üè¶ Bank of Luck</a>
            {% endif %}
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    {% if session.user_id %}
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('user_dashboard') }}">Dashboard</a></li>
                    {% elif session.emp_id %}
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('employee_dashboard') }}">Dashboard</a>
                    </li>
                    {% elif session.admin_id %}
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('admin_dashboard') }}">Dashboard</a></li>
                    {% endif %}
                    {% if session.user_id or session.emp_id or session.admin_id %}
                    <li class="nav-item me-3">
                        <button class="btn btn-sm btn-outline-light theme-toggle" title="Toggle Dark/Light Mode"
                            aria-label="Toggle theme">
                            <img src="{{ url_for('static', filename='img/Icon/Dark_Mode.svg') }}" class="theme-icon"
                                alt="Theme Icon" style="width: 20px; height: 20px;"
                                data-light-dest="{{ url_for('static', filename='img/Icon/Light_Mode.svg') }}"
                                data-dark-dest="{{ url_for('static', filename='img/Icon/Dark_Mode.svg') }}">
                        </button>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category == 'danger' else ('success' if category == 'success' else ('warning' if category == 'warning' else 'info')) }} alert-dismissible fade show"
            role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>

    <!-- Modals Block - Outside container to prevent z-index issues -->
    {% block modals %}{% endblock %}

    <footer class="mt-5 py-4 bg-light footer-modern">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-4 text-center text-md-start mb-3 mb-md-0">
                    <div class="footer-brand">
                        <span class="footer-logo">üè¶</span>
                        <span class="footer-title">Bank of Luck</span>
                    </div>
                    <p class="footer-tagline mb-0">Secure. Reliable. Modern.</p>
                </div>
                <div class="col-md-4 text-center mb-3 mb-md-0">
                    <div class="footer-social">
                        <a href="https://github.com/MohamedTarek3M/Bank-System" target="_blank"
                            rel="noopener noreferrer" class="social-link" title="GitHub"
                            aria-label="Visit GitHub profile">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                viewBox="0 0 16 16">
                                <path
                                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                            </svg>
                        </a>
                        <a href="https://x.com/MohamedTarek3M" target="_blank" rel="noopener noreferrer"
                            class="social-link" title="X (Formerly Twitter)" aria-label="Visit X profile">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                viewBox="0 0 16 16">
                                <path
                                    d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z" />
                            </svg>
                        </a>
                        <a href="mailto:mohamedtarekcontact@gmail.com" class="social-link" title="Email"
                            aria-label="Send email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                viewBox="0 0 16 16">
                                <path
                                    d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z" />
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="col-md-4 text-center text-md-end">
                    <p class="footer-copyright mb-0">
                        <small>&copy; 2025 <a href="https://github.com/MohamedTarek3M" target="_blank"
                                rel="noopener noreferrer" class="footer-link">Mohamed Tarek</a></small>
                    </p>
                    <p class="footer-rights mb-0">
                        <small>All rights reserved.</small>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cursor-effect.js') }}"></script>
    <script src="{{ url_for('static', filename='js/falling-coins.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>